#Neostats Module Makefile!
CC=@CC@
CFLAGS=-I.. @CFLAGS@
LDFLAGS= @LDFLAGS@
INSTALL = @INSTALL@
INSTALL_PROGRAM = @INSTALL_PROGRAM@
INSTALL_DATA = @INSTALL_DATA@
DIRECTORY=@DIRINST@/dl/
INCLUDES=-I@DIRINST@/include/ -I.

SOURCES= get.c pcre.c  study.c
OBJECTS= get.o pcre.o  study.o
TARGET= libpcre.a
DOCS=README.pcre COPYING

all:	 libpcre.a

.c.o:	
	 $(CC) -c $(CFLAGS) $(INCLUDES) $<

maketable:
	$(CC) -c $(CFLAGS) $(INCLUDES) dftables.c
	$(CC) $(LDFLAGS) dftables.o -o dftables
	./dftables >./chartables.c

libpcre.a: maketable $(OBJECTS) 
	ar cru $(TARGET) ${OBJECTS}
	ranlib $(TARGET)

clean:
	 /bin/rm -rf $(TARGET) *.o Makefile dftables pcre.h chartables.c

install: 

dist:	

$(OBJECTS): Makefile
pcre.o:	chartables.c pcre.h internal.h ../modconfig.h
get.o: pcre.h internal.h ../modconfig.h
study.o: pcre.h internal.h ../modconfig.h
dftables.o: pcre.h internal.h ../modconfig.h

